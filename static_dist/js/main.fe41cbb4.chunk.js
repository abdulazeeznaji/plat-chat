(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{131:function(t,e,n){t.exports=n(195)},136:function(t,e,n){},148:function(t,e,n){},195:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(9),i=n.n(r);n(136),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(13),c=n(112),s=n(14),u=n(15),h=n(18),m=n(17),p=n(238),d=n(230),g=n(120),f=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={email:"",password:""},t.handle_change=function(e){t.setState(Object(c.a)({},e.target.name,e.target.value))},t.handle_login=function(e,n){e.preventDefault(),fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(e){localStorage.setItem("token",e.token),t.setState({logged_in:!0,username:e.token})}))},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(g.a,{style:{alignText:"center",padding:"2em"}},o.a.createElement(p.a,{type:"text",label:"email",name:"email",value:this.state.email,onChange:this.handle_change,fullWidth:!0}),o.a.createElement("br",null),o.a.createElement(p.a,{type:"password",label:"password",name:"password",value:this.state.password,onChange:this.handle_change,fullWidth:!0}),o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement(d.a,{color:"primary",style:{marginLeft:"auto",marginRight:"auto",display:"block"},onClick:function(e){return t.handle_login(e,t.state)}},"Login")))}}]),n}(o.a.Component),v=(n(148),n(232)),b=n(233),E=n(235),y=n(234),j=n(231),k=n(113),O=n.n(k),C=Object(j.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));function S(t){var e=C();return o.a.createElement("div",{className:e.root},o.a.createElement(v.a,{position:"static"},o.a.createElement(b.a,null,o.a.createElement(y.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},o.a.createElement(O.a,null)),o.a.createElement(E.a,{variant:"h6",className:e.title},"Plat-Chat"),t.logged_in?o.a.createElement(d.a,{onClick:t.handle_logout,color:"inherit"},"Logout"):o.a.createElement("div",null,o.a.createElement(d.a,{onClick:function(){l.d.push("/login")},color:"inherit"},"Login"),o.a.createElement(d.a,{onClick:function(){l.d.push("/signup")},color:"inherit"},"Signup")))))}var x=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).handle_logout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:""}),l.d.push("/login")},a.state={posts:[],logged_in:!!localStorage.getItem("token")},a}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(S,{logged_in:this.state.logged_in,handle_logout:this.handle_logout}),this.props.children)}}]),n}(a.Component),w=n(85),_=n(86),P=n(236),T=n(116),N=n.n(T),W=n(117),I=n.n(W);function A(){var t=Object(w.a)(["\n\tposition: relative;\n\tcursor: pointer;\n\tright: 15px;\n\ttop: 9px;\n\tfloat:right;\n"]);return A=function(){return t},t}function J(){var t=Object(w.a)(["\n\tmargin: 5px;\n"]);return J=function(){return t},t}var L=_.a.div(J()),B=Object(_.a)(N.a)(A()),D=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={open:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props,e=t.post,n=t.deletePost;return o.a.createElement(L,null,o.a.createElement(P.a,{container:!0,style:{margin:10}},o.a.createElement(P.a,{item:!0,xs:10,sm:10,md:10},o.a.createElement(E.a,{style:{fontSize:18}},e.body)),o.a.createElement(P.a,{item:!0,xs:2,sm:2,md:2},o.a.createElement(B,{nativeColor:I.a[600],onClick:function(){return n(e.id)}}))))}}]),n}(a.Component),F=n(237),z=function(t){var e=t.post,n=t.deletePost;return o.a.createElement(F.a,{style:{margin:"25px 0"},square:!0},o.a.createElement(D,{post:e,deletePost:n}))},G=n(5),M=n(239),R=n(229),q=n(240),Y=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).handleChange=function(t){a.setState({post:t.target.value})},a.handleSubmit=function(t){t.preventDefault();var e={body:a.state.post,user:1};fetch("http://localhost:8000/posts/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){localStorage.setItem("token",t.token),a.setState({logged_in:!0,displayed_form:"",username:t.username})}))},a.state={post:""},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.classes;return o.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form,encType:"multipart/form-data"},o.a.createElement(M.a,{className:t.formControl},o.a.createElement(q.a,{htmlFor:"new_post"},"What's on your mind?"),o.a.createElement(R.a,{type:"text",autoComplete:"off",id:"text",name:"text",value:this.state.post,onChange:this.handleChange}),o.a.createElement(d.a,{type:"submit",disabled:!this.state.post,variant:"outlined",className:t.button},"Create Post")))}}]),n}(a.Component),$=Object(G.a)({form:{width:"100%",margin:"0 auto",display:"flex",paddingTop:20},formControl:{margin:"0 auto",width:500},button:{width:200,margin:"10px 0"}})(Y),H=n(118),K=n.n(H),Q=n(119),U=n.n(Q),V=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).deletePost=function(t){fetch("http://localhost:8000/posts/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(t){return t.json()})).then((function(t){}))},a.updatePosts=function(t){a.setState({feed:t})},a.renderPosts=function(t){return t.map((function(t){return o.a.createElement(z,{post:t,deletePost:a.deletePost})}))},a.state={posts:[],loadingFeed:!0},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("http://localhost:8000/posts/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("token"))},body:JSON.stringify()}).then((function(t){return t.json()})).then((function(e){t.setState({posts:e})})).finally((function(){return t.setState({loadingFeed:!1})}))}},{key:"render",value:function(){return o.a.createElement("div",{style:{padding:10}},o.a.createElement($,{updatePosts:this.updatePosts}),o.a.createElement("div",{style:{maxWidth:"500px",margin:"0 auto",paddingTop:"20px"}},this.state.loadingFeed?o.a.createElement(E.a,{variant:"headline"},"Loading posts..."):this.state.posts.length?this.renderPosts(this.state.posts):o.a.createElement(E.a,{variant:"headline"},o.a.createElement(K.a,{style:{position:"relative",top:"3px"},nativeColor:U.a[500]}),"\xa0\xa0No Posts Yet.")))}}]),n}(a.Component);function X(t){return function(e){Object(h.a)(a,e);var n=Object(m.a)(a);function a(t){var e;return Object(s.a)(this,a),(e=n.call(this,t)).state={logged_in:!!localStorage.getItem("token")},e}return Object(u.a)(a,[{key:"componentWillMount",value:function(){this.checkAuth()}},{key:"componentWillReceiveProps",value:function(t){this.checkAuth()}},{key:"checkAuth",value:function(){if(!this.state.logged_in){var t=this.props.location.pathname;l.d.push("/login?next=".concat(t))}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(t,this.props))}}]),a}(o.a.Component)}var Z=o.a.createElement(l.c,{history:l.d},o.a.createElement(l.b,{path:"/",component:X(x)},o.a.createElement(l.a,{component:X(V)})),o.a.createElement(l.b,{path:"login",component:f}));sessionStorage.getItem("token");i.a.render(o.a.createElement(o.a.StrictMode,null,Z),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.fe41cbb4.chunk.js.map